https://cloud.digitalocean.com/droplets/7728236/graphs
Login: dev@e-line.ua
Pass: lamzukonelove

В консоли и для доступа к sftp:
Login: root
Pass: [e1995b&&&a1996r]
host: 5.101.105.227

С дроплетом Eline-Socket можно делать все, это сервер, который отвечает за контакт с контроллерами станций. На дроплете E-line лежит вся система, ее не нужно трогать. 

В файле app.js весь код, большая часть там реализована, но не тестирована, и много того, что нам пока не нужно. В models.js лежат модели для mongoose. Единственное изменение, которого еще нет, это в схеме карты добавится поле, которое будет хранить номер, забитый в карте (сам номер в hex, но пока планируем, что в базе будет храниться как string), по этому полю и будет происходить поиск нужной карты в базе на этом сервере. 
Вся инфа для доступа к базе есть в app.js.

Пока нужно делать некоторые операции в зависимости от полученного кода (на примере кусков старого кода):

1. Начало зарядки:
  1. Найти станцию по полю id (номер платы), запомнить ее поле _id и изменить 
     station.plugStatus[plugId] = true; // статус розетки - занята
     plugId - номер розетки, по которой началась зарядка, пока это только 1, 2, 3 или 4
  2. Найти карту по hex номеру, запомнить ее _id в базе
  3. Создать запись базы Charge: 
		var charge = new Charge({
			card: card._id, //_id записи базы, которая соответствует карте
			user: card.user, //пользователь, к котрому привязана карта, фактически - _id юзера
			date: msg.time, //время начала зарядки
			station: station._id, //_id записи станции в базе
			plugId: plugId, //номер розетки
			outOfPlan: outOfPlan //просто false
		});
	В Charge еще есть поле status (string), оно после создания по-умолчанию "waiting"

2. Конец зарядки: 
	1. Найти запись карты в базе по hex номеру, запомнить ее _id
	2. Найти запись Charge в базе по _id карты и со статусом waiting, в ней меняем/добавляем: 
		charge.status = 'success'; // зарядка успешно завершена 
		charge.realPower = msg.data; // потребленные кВт
		charge.duration = ((msg.time - charge.date)/60000).toPrecision(2); // вычисленное время зарядки
	3. Найти запись станции и поменять
	   station.plugStatus[plugId] = false; // Статус розетки - свободна	


Если интересно, само приложение лежит здесь: http://46.101.209.211/
Для доступа с админскими правами: admin 111111
2-x комн, 4 из 4, сталинка, угол жук-шев, ремонт косметика, 6к + ком, не для студ, и не для курящих